# yaml-language-server: $schema=https://raw.githubusercontent.com/krackenservices/scp-definition/main/spec/scp.schema.json
scp: "0.1.0"

system:
  urn: "urn:scp:example:mlapi"
  name: "ML API"
  description: "FastAPI Python service providing machine learning predictions and statistical analysis"
  classification:
    tier: 2
    domain: "backend"
    tags:
      - "api"
      - "ml"
      - "python"
      - "predictions"

ownership:
  team: "ml-team"
  contacts:
    - type: "email"
      ref: "mailto:ml-team@example.com"

provides:
  - capability: "ml-predictions"
    type: "rest"
    contract:
      type: "openapi"
      ref: "./docs/api.yaml"
    sla:
      availability: "99.5%"
      latency_p99_ms: 1000
      throughput_rps: 100

constraints:
  security:
    authentication: ["api-key"]
    encryption:
      in_transit: true
  operational:
    max_replicas: 5
    min_replicas: 1

runtime:
  environments:
    production:
      otel_service_name: "mlapi"
      endpoints:
        - "https://ml.example.com"
    development:
      otel_service_name: "mlapi-dev"
      endpoints:
        - "http://localhost:8080"

failure_modes:
  - mode: "high-latency"
    impact: "degraded-experience"
    detection: "latency-threshold"
    recovery: "auto-scale"
    degraded_behavior: "Increased response times for prediction requests"
    mttr_target_minutes: 2
